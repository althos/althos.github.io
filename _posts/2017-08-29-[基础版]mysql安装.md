---
layout:     post
title:      mysql的安装
subtitle:   window MySQL5.7免安装版配置
date:       2017-08-29
author:     Cyber
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - 后端
    - 效率
    - 服务器

---

> 因为自己学习开发的需求，需要在本地安装MySQL数据库用来做本地测试。

# 1.去官网下载[mysql-5.7.23-winx64.zip](https://blog.csdn.net/weixin_42831477/article/details/81413510)

直接下载

![](img/cb-mysql-info.png)

解压到安装路径

![](../img/mysql-install/mysql-local.png)

# 2.配置文件

与5.6 的免安装版不一样，5.7没有data目录与my-default.ini文件，所以创建data目录，同时创建my.ini文件，配置:

```
# For advice on how to change settings please see
# http://dev.mysql.com/doc/refman/5.6/en/server-configuration-defaults.html
# *** DO NOT EDIT THIS FILE. It's a template which will be copied to the
# *** default location during install, and will be replaced if you
# *** upgrade to a newer version of MySQL.

[mysqld]
# Remove leading # and set to the amount of RAM for the most important data
# cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.
  #innodb的缓存，可以根据实际情况调整大小，我这里采取默认值
  innodb_buffer_pool_size = 128M

# Remove leading # to turn on a very important data integrity option: logging
# changes to the binary log between backups.
# log_bin

# These are commonly set, remove the # and set as required.
  #mysql根目录
  basedir = D:\dev\mysql-5.7.23
  #数据存储目录
  datadir = D:\dev\mysql-5.7.23\data
  #端口号，默认为3306
  port = 3376
  #服务实例的唯一标识，这个是做集群的时候使用，单例可以不配置
# server_id = .....


# Remove leading # to set options mainly useful for reporting servers.
# The server defaults are faster for transactions and fast SELECTs.
# Adjust sizes as needed, experiment to find the optimal values.
  #把这些缓存都放开，可以提高性能，加快速度
  join_buffer_size = 128M
  sort_buffer_size = 2M
  read_rnd_buffer_size = 2M 
  #配置一下服务端的字符集
  character_set_server=utf8mb4
sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES 
#配置一下客户端的字符集
[client]   
default-character-set=utf8mb4

```

# 3.初始化

cmd进入bin执行 `mysqld –initialize`

执行完毕之后，在data目录下会生成很多文件。

![](img/mysql-install/mysql-init.png)

# 4.安装mysql服务

cmd进入bin执行 

```
mysqld –install MySQL57  #install后面是服务的名字，我们这里以                                MySQL57作为mysql5.7的服务名
```

然后去windows的服务里面就能找到：

![](img/mysql-install/mysql-service.png)

服务就装好了，一般来说为了省事，设置为自动就好了，开机了就会自动启动，也可以在cmd执行命令:

```
net start MySQL57 #启动
net stop MySQL57  #停止
```

# 5.登录与改用户名

###### 登录

继续执行我们的命令行， `mysql -uroot -P3376 -p ` 命令，这次我们需要加入-P(大写)参数，因为端口号 `不是默认 `的了，我们需要显示指定出来。 
这次空密码登陆是行不通的，我们需要找到初始化密码 
我们找到data目录下初始化文件里面有个以.err结尾的文件。 
这里有我们想要的临时密码。

![](img/mysql-install/mysql-pass.png)

用该密码登录即可。



###### 修改密码

这个地方与5.6版本有区别，5.7版本user表更改了结构  更改密码，并刷新权限

```
ALTER USER ‘root’@’localhost’ IDENTIFIED BY ‘cyber’; 
FLUSH PRIVILEGES;
```

